<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ì˜ˆë¯¼í•œ ì‚¬ëŒì¼ê¹Œ?</title>

  <!-- SEO / OG (ì •ì : ê¸°ë³¸ í•œêµ­ì–´) -->
  <meta name="description" content="HSP ìê°€ì§„ë‹¨ í…ŒìŠ¤íŠ¸. ì˜ˆ/ì•„ë‹ˆì˜¤ ì²´í¬ í›„ ì ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.">
  <meta property="og:title" content="ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ì˜ˆë¯¼í•œ ì‚¬ëŒì¼ê¹Œ?">
  <meta property="og:description" content="27ë¬¸í•­ì— ë‹µë³€í•˜ì‹œë©´ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hsp-test.github.io/hsp-test/">
  <meta property="og:image" content="https://hsp-test.github.io/hsp-test/og-hsp.png">
  <link rel="icon" href="favicon.ico">

  <style>
    :root{--bg:#0f172a;--panel:#111827;--muted:#94a3b8;--text:#e5e7eb;--accent:#38bdf8;--accent2:#22c55e;--warn:#f59e0b;--err:#ef4444;--card:#0b1220;--border:#1f2937;}
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif}
    a{color:var(--accent)}
    .container{max-width:960px;margin:0 auto;padding:24px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));border:1px solid var(--border);border-radius:16px;padding:24px;min-height:400px;display:flex;flex-direction:column}
    h1{font-size:clamp(22px,3.2vw,32px);margin:0 0 8px}
    .sub{color:var(--muted);margin:0 0 10px}
    .note{color:var(--muted);font-size:13px;margin:0 0 20px}
    .langbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:8px 0 0}
    .langbtn{border:1px solid var(--border);background:#0a0f1d;color:var(--text);border-radius:999px;padding:6px 10px;font-weight:700;cursor:pointer}
    .langbtn.active{background:var(--accent);color:#001018;border-color:var(--accent)}
.muted{color:var(--muted)}
.langbar-fixed{
  position: fixed;
  top: max(12px, env(safe-area-inset-top));
  right: max(12px, env(safe-area-inset-right));
  z-index: 1000;
  background: rgba(10, 15, 29, 0.6);
  backdrop-filter: blur(6px);
  border: 1px solid var(--border);
  padding: 6px;
  border-radius: 999px;
}
    .progress{height:10px;border-radius:999px;background:#0a0f1d;border:1px solid var(--border);overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,var(--accent),#60a5fa);width:0%}
    .actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:18px}
    button{cursor:pointer;border:none;border-radius:12px;padding:12px 16px;font-weight:700}
    .primary{background:var(--accent);color:#001018}
    .ghost{background:#0a0f1d;border:1px solid var(--border);color:var(--text)}
    .danger{background:var(--err);color:#fff}
    .share-row{display:flex;gap:10px;flex-wrap:wrap}
    .share-btn{background:#0a0f1d;border:1px solid var(--border);color:var(--text);border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .share-btn:hover{border-color:var(--accent)}
    #quizContainer{flex-grow:1;position:relative}
    .item{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:20px;margin:0;min-width:0;position:absolute;top:0;left:0;right:0;opacity:0;pointer-events:none;transition:opacity .3s;display:flex;flex-direction:column;height:100%}
    .item.active{opacity:1;pointer-events:auto;position:relative}
    .qhead{display:flex;gap:15px;align-items:flex-start;margin-bottom:25px}
    .qnum{flex:0 0 auto;background:var(--accent);color:#001018;font-weight:700;border-radius:12px;padding:6px 12px;font-size:1.2em}
    .qtxt{line-height:1.7;font-weight:600;font-size:1.2em;flex-grow:1}
    .opts{margin-top:20px;display:flex;gap:15px;justify-content:center}
    .ans-btn{cursor:pointer;border:2px solid var(--border);border-radius:14px;padding:15px 25px;font-weight:700;font-size:1.1em;background:#0a0f1d;color:var(--text);transition:all .2s;flex-basis:45%}
    .ans-btn:hover{border-color:var(--accent);background:rgba(56,189,248,.1)}
    .ans-btn.selected-1{background:var(--accent2);color:#000;border-color:var(--accent2)}
    .ans-btn.selected-0{background:var(--err);color:#fff;border-color:var(--err)}
    .nav-actions{display:flex;justify-content:space-between;margin-top:20px}
    .nav-actions button{padding:10px 18px}
    .result{margin-top:22px;background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:3.5rem 2.5rem;flex-direction:column;align-items:center;text-align:center;display:none}
    .result h3{font-size:2.2em;margin:0 0 15px;font-weight:900}
    #interp{font-size:1.6em;line-height:1.6;margin:0 0 16px}
    #scoreLine{font-size:1.3em;margin:0 0 12px;line-height:1.5}
    .pill{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:6px 10px;margin:4px 6px 0 0;background:#0a0f1d}
    .badge{display:inline-block;border-radius:10px;padding:4px 8px;font-weight:700}
    .ok{background:var(--accent2);color:#06240f}
    .warn{background:var(--warn);color:#2b1d00}
    .err{background:var(--err);color:#fff}
    #btnBlog{background:#1DDB16;color:#fff;border:none;padding:12px 20px;font-size:1.05em;font-weight:700;border-radius:12px;cursor:pointer;margin-top:16px}
    #btnBlog:hover{opacity:.9}
    .req{outline:2px solid var(--err);outline-offset:2px}
    @media(max-width:600px){.container{padding:16px}.ans-btn{flex-basis:100%}.opts{flex-direction:column}.result h3{font-size:1.8em}#scoreLine{font-size:1.1em}#interp{font-size:1.2em}}
  </style>
</head>
<body>
  <div class="container">
    <header class="card" role="banner" aria-label="HSP ìê°€ì§„ë‹¨ ì†Œê°œ">
      <h1 id="title">ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ì˜ˆë¯¼í•œ ì‚¬ëŒì¼ê¹Œ?</h1>
      <h2 id="subtitle">HSP(Highly Sensitive Person) ìê°€ì§„ë‹¨ - 27ë¬¸í•­</h2>
      <p class="sub" id="subdesc">ì—˜ë ˆì¸ ì•„ë¡ ì˜ HSP ê´€ë ¨ ë¬¸í—Œì„ ë°”íƒ•ìœ¼ë¡œ í•œ ìê°€TESTì…ë‹ˆë‹¤.</p>
      <p class="note" id="note">(ìê°€ ì ê²€ìš©ìœ¼ë¡œ, <b>ê³µì‹ ì„ìƒ ì§„ë‹¨ì´ ì•„ë‹™ë‹ˆë‹¤</b>.)</p>

      <!-- ì–¸ì–´ ì „í™˜ -->
<div class="langbar langbar-fixed" aria-label="language switch">
  <button class="langbtn active" id="btnKo">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
  <button class="langbtn" id="btnEn">ğŸ‡ºğŸ‡¸ English</button>
</div>

      <div aria-label="ì„¤ë¬¸ ì§„í–‰ë„" class="progress" title="progress">
        <div class="bar" id="progBar"></div>
      </div>
      <p class="sub" id="progText">0 / 27 ë¬¸í•­ ì‘ë‹µ</p>

      <div class="actions">
        <button class="danger" id="btnReset" aria-label="reset">ì‘ë‹µ ì´ˆê¸°í™”</button>
        <div class="share-row">
          <button class="share-btn" id="btnCopy">ë§í¬ ë³µì‚¬</button>
          <button class="share-btn" id="btnKakao">ì¹´ì¹´ì˜¤í†¡ ê³µìœ </button>
        </div>
      </div>
    </header>

    <main class="card" role="main" aria-labelledby="formTitle">
      <h2 id="formTitle" class="sr-only">HSP 27ë¬¸í•­ ì„¤ë¬¸</h2>

      <section class="result" id="result" aria-live="polite" aria-atomic="true">
        <h3 id="resultTitle">ê²°ê³¼</h3>
        <p id="interp"></p>
        <p id="scoreLine"></p>
        <div id="tags" class="muted"></div>

        <div class="result-buttons">
          <button id="btnBlog">ë„ˆë¬´ ì˜ˆë¯¼í•œ ì‚¬ëŒë“¤ì„ ìœ„í•œ ê³µê°„. Blog ë°©ë¬¸í•˜ê¸°</button>
        </div>

        <div class="footer">
          <p id="refNote" class="muted">
            References: Aron, E. N. (1996). <i>The Highly Sensitive Person</i>; Aron, Aron &amp; Jagiellowicz (2010), <i>PSPR</i>.
          </p>
        </div>
      </section>

      <div id="quizContainer"></div>

      <div class="nav-actions" id="navActions">
        <button class="ghost" id="btnPrev" style="visibility:hidden">ì´ì „</button>
        <button class="primary" id="btnNext">ë‹¤ìŒ</button>
      </div>
    </main>
  </div>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KTZ7J2MJEN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-KTZ7J2MJEN');
    function trackHspScore(score){ gtag('event','hsp_score_submit',{score:score, lang: (localStorage.getItem('hsp_lang')||'ko')}); }
  </script>

  <!-- Kakao SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.6.0/kakao.min.js" crossorigin="anonymous"></script>
  <script> Kakao.init("2b08a56fe8623755bf5a0b373225221e"); </script>

  <script>
    // =======================
    // i18n ì‚¬ì „
    // =======================
    const I18N = {
      ko: {
        ui: {
          title: "ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ì˜ˆë¯¼í•œ ì‚¬ëŒì¼ê¹Œ?",
          subtitle: "HSP(Highly Sensitive Person) ìê°€ì§„ë‹¨ - 27ë¬¸í•­",
          subdesc: "ì—˜ë ˆì¸ ì•„ë¡ ì˜ HSP ê´€ë ¨ ë¬¸í—Œì„ ë°”íƒ•ìœ¼ë¡œ í•œ ìê°€TESTì…ë‹ˆë‹¤.",
          note: "(ìê°€ ì ê²€ìš©ìœ¼ë¡œ, <b>ê³µì‹ ì„ìƒ ì§„ë‹¨ì´ ì•„ë‹™ë‹ˆë‹¤</b>.)",
          result: "ê²°ê³¼",
          prev: "ì´ì „",
          next: "ë‹¤ìŒ",
          seeResult: "ê²°ê³¼ í™•ì¸",
          reset: "ì‘ë‹µ ì´ˆê¸°í™”",
          copy: "ë§í¬ ë³µì‚¬",
          shareKakao: "ì¹´ì¹´ì˜¤í†¡ ê³µìœ ",
          blogBtn: "ë„ˆë¬´ ì˜ˆë¯¼í•œ ì‚¬ëŒë“¤ì„ ìœ„í•œ ê³µê°„. Blog ë°©ë¬¸í•˜ê¸°",
          progress: (a,t)=>`${a} / ${t} ë¬¸í•­ ì‘ë‹µ`,
          qnum: (i,t)=>`${i} / ${t}`,
          yes: "ì˜ˆ (Yes)", no: "ì•„ë‹ˆì˜¤ (No)",
          scoreLine: (s,t)=>`ë‹¹ì‹ ì˜ ì ìˆ˜ëŠ” ${s}ì  / ${t}ì  ì…ë‹ˆë‹¤.`,
          bandHigh: " HSP ì„±í–¥ ê°•í•¨ ", bandMid: " ì¤‘ê°„ ì •ë„ ", bandLow: " HSP ì„±í–¥ ë‚®ìŒ ",
          interpHigh: "ë¯¼ê°ì„±ì´ ê°•í•˜ê²Œ ë‚˜íƒ€ë‚  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ìê·¹ ê´€ë¦¬, íšŒë³µ ë£¨í‹´, í™˜ê²½ ì¡°ì ˆì´ íŠ¹íˆ ì¤‘ìš”í•©ë‹ˆë‹¤.",
          interpMid: "ìƒí™©ì— ë”°ë¼ ë¯¼ê°ì„±ì´ ë‘ë“œëŸ¬ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ìƒì—ì„œ ìê·¹/íœ´ì‹ ê· í˜•ì„ ì ê²€í•˜ì„¸ìš”.",
          interpLow: "ë¯¼ê°ì„±ì´ ëšœë ·í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ íŠ¹ì • ìƒí™©ì—ì„œ ë¶€ë¶„ì ìœ¼ë¡œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
          references: `References: Aron, E. N. (1996). <i>The Highly Sensitive Person</i>; Aron, Aron &amp; Jagiellowicz (2010), <i>PSPR</i>.`,
          tags: ['#HSP','#ì˜ˆë¯¼í•œì‚¬ëŒ','#ì˜ˆë¯¼í•˜ë‹¤','#HSPí…ŒìŠ¤íŠ¸','#ë¯¼ê°ì„±í…ŒìŠ¤íŠ¸','#ìê¸°ì´í•´']
        },
        questions: [
          "ê°•í•œ ìê·¹(ë°ì€ ë¹›, ê°•í•œ ëƒ„ìƒˆ, ê±°ì¹œ ì˜·ê°, í° ì†Œë¦¬ ë“±)ì— ì‰½ê²Œ ì••ë„ëœë‹¤.",
          "ì§§ì€ ì‹œê°„ì— ë§ì€ ì¼ì„ ì²˜ë¦¬í•´ì•¼ í•˜ë©´ ë¶ˆí¸í•˜ê±°ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ëŠë‚€ë‹¤.",
          "ì¹´í˜ì¸ ê°™ì€ ìê·¹ ë¬¼ì§ˆì— ë¯¼ê°í•˜ë‹¤.",
          "ë°ì€ ë¹›, ê°•í•œ ëƒ„ìƒˆ, ê±°ì¹œ ì˜·ê°, í° ì†Œë¦¬ ë“±ì´ ì‹ ê²½ì„ ê±°ìŠ¬ë¦¬ê²Œ í•œë‹¤.",
          "ë°”ìœ ë‚ ì—ëŠ” ì¹¨ëŒ€ë‚˜ ì–´ë‘ìš´ ë°©ì²˜ëŸ¼ ìê·¹ì„ ì¤„ì¼ ìˆ˜ ìˆëŠ” ê³µê°„ì´ í•„ìš”í•˜ë‹¤.",
          "íƒ€ì¸ì˜ ê¸°ë¶„ì´ë‚˜ ê°ì •ì— ì‰½ê²Œ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.",
          "ì˜ˆìˆ ì´ë‚˜ ìŒì•…, ìì—°ì—ì„œ ê¹Šì€ ê°ë™ì„ ê²½í—˜í•œë‹¤.",
          "ì‹œë„ëŸ½ê³  í˜¼ì¡í•œ í™˜ê²½ì—ì„œ ì‰½ê²Œ í”¼ë¡œí•´ì§„ë‹¤.",
          "ë†€ë¼ì›€(ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì†Œë¦¬, ì˜ˆê¸°ì¹˜ ì•Šì€ ì‚¬ê±´)ì— ê³¼ë„í•˜ê²Œ ë°˜ì‘í•œë‹¤.",
          "í’ë¶€í•˜ê³  ë³µì¡í•œ ë‚´ì  ì„¸ê³„(ìƒìƒ, ê¿ˆ, ì‚¬ê³ )ë¥¼ ê°€ì§€ê³  ìˆë‹¤.",
          "ì‚¬ì†Œí•œ ë””í…Œì¼ì´ë‚˜ ë³€í™”ë¥¼ ì˜ ì•Œì•„ì°¨ë¦°ë‹¤.",
          "ì•„ì´ë‚˜ ë™ë¬¼, íƒ€ì¸ì˜ ê³ í†µì— ê°•í•˜ê²Œ ê³µê°í•œë‹¤.",
          "ìƒí™œì´ë‚˜ ì¼ì •ì´ ê°‘ì‘ìŠ¤ëŸ½ê²Œ ë³€í•˜ë©´ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í¬ê²Œ ë°›ëŠ”ë‹¤.",
          "ì‹¤ìˆ˜, ë¹„íŒ, ì”ì†Œë¦¬ì— ì‰½ê²Œ ìœ„ì¶•ëœë‹¤.",
          "ê²½ìŸì´ë‚˜ ê´€ì°°ì„ ë°›ëŠ” ìƒí™©ì—ì„œëŠ” ëŠ¥ë ¥ì„ ì¶©ë¶„íˆ ë°œíœ˜í•˜ì§€ ëª»í•  ë•Œê°€ ë§ë‹¤.",
          "í­ë ¥ì ì´ê±°ë‚˜ ì”ì¸í•œ ì¥ë©´(ì˜í™”, ë‰´ìŠ¤ ë“±)ì´ ì˜¤ë˜ ë§ˆìŒì— ë‚¨ëŠ”ë‹¤.",
          "ì˜ë¬´ë‚˜ í•´ì•¼ í•  ì¼ì´ ìŒ“ì´ë©´ ì‰½ê²Œ ì••ë„ëœë‹¤.",
          "ì‚¬íšŒì  ìƒí™©ì—ì„œì˜ ê¸´ì¥ì´ë‚˜ ê°ˆë“±ì´ ì˜¤ë˜ ë§ˆìŒì— ë‚¨ëŠ”ë‹¤.",
          "í° ì„±ê³¼ë¥¼ ë‚´ë”ë¼ë„ ë¶€ë‹´ê° ë•Œë¬¸ì— ê¸°ì¨ì´ ì˜¤ë˜ ê°€ì§€ ì•ŠëŠ”ë‹¤.",
          "ì‹ìŠµê´€, ìˆ˜ë©´ ë¶€ì¡±, ê³¼ë„í•œ ìê·¹ì´ ê¸°ë¶„ê³¼ ëª¸ ìƒíƒœì— í¬ê²Œ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.",
          "ìƒˆë¡œìš´ í™˜ê²½ì´ë‚˜ ë‚¯ì„  ì¥ì†Œì— ì ì‘í•˜ëŠ” ë° ì‹œê°„ì´ í•„ìš”í•˜ë‹¤.",
          "ì–´ë¦° ì‹œì ˆ â€œë„ˆë¬´ ì˜ˆë¯¼í•˜ë‹¤â€ëŠ” ë§ì„ ìì£¼ ë“¤ì—ˆë‹¤.",
          "íƒ€ì¸ì˜ ê¸°ëŒ€ë‚˜ ìš”êµ¬ë¥¼ ì˜ ì˜ì‹í•˜ê³  ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•œë‹¤.",
          "ê¹Šì€ ì‚¬ìƒ‰ì´ë‚˜ ìê¸° ì„±ì°°ì„ ìì£¼ í•œë‹¤.",
          "ê°ì •ì˜ ê¸°ë³µì´ í° í¸ì´ë‹¤.",
          "ì¡°ìš©í•˜ê³  í‰í™”ë¡œìš´ í™˜ê²½ì—ì„œ ë” ì˜ ê¸°ëŠ¥í•œë‹¤.",
          "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ëŒ€ìˆ˜ë¡­ì§€ ì•Šê²Œ ì—¬ê¸°ëŠ” ìê·¹ì—ë„ ì‹ ì²´ì Â·ì •ì‹ ì ìœ¼ë¡œ í° ë°˜ì‘ì„ í•œë‹¤."
        ]
      },
      en: {
        ui: {
          title: "How sensitive am I?",
          subtitle: "HSP (Highly Sensitive Person) Self-Test â€” 27 Items",
          subdesc: "A self-assessment based on Elaine N. Aron's HSP literature.",
          note: "(For self-reflection only; <b>not a clinical diagnosis</b>.)",
          result: "Result",
          prev: "Previous",
          next: "Next",
          seeResult: "See result",
          reset: "Reset answers",
          copy: "Copy link",
          shareKakao: "Share to KakaoTalk",
          blogBtn: "A space for highly sensitive people â€” Visit Blog",
          progress: (a,t)=>`${a} / ${t} answered`,
          qnum: (i,t)=>`${i} / ${t}`,
          yes: "Yes", no: "No",
          scoreLine: (s,t)=>`Your score is ${s} / ${t}.`,
          bandHigh: " Strong HSP tendency ", bandMid: " Moderate ", bandLow: " Low HSP tendency ",
          interpHigh: "Your sensitivity is likely strong. Prioritize stimulus management, recovery routines, and environment control.",
          interpMid: "Sensitivity may stand out depending on the situation. Balance stimulation and rest in daily life.",
          interpLow: "Sensitivity may not be salient, though it can appear in specific contexts.",
          references: `References: Aron, E. N. (1996). <i>The Highly Sensitive Person</i>; Aron, Aron &amp; Jagiellowicz (2010), <i>PSPR</i>.`,
          tags: ['#HSP','#HighlySensitive','#Sensitivity','#HSPtest','#SensoryProcessing','#SelfInsight']
        },
        questions: [
          "I am easily overwhelmed by strong stimuli (bright lights, strong smells, coarse fabrics, loud noises).",
          "I feel uncomfortable or stressed when I must do a lot in a short time.",
          "I am sensitive to stimulants like caffeine.",
          "Bright lights, strong smells, coarse fabrics, or loud noises easily bother me.",
          "On busy days, I need a place to retreat (bed, dark room) to reduce stimulation.",
          "I am easily affected by other people's moods or emotions.",
          "I feel deep emotions when engaged with art, music, or nature.",
          "I tire easily in noisy and crowded environments.",
          "I startle or react strongly to sudden noises or unexpected events.",
          "I have a rich, complex inner life (imagination, dreams, thoughts).",
          "I notice subtle details and small changes.",
          "I strongly empathize with the pain of children, animals, or others.",
          "Sudden changes in plans or routines stress me out.",
          "I am easily discouraged by mistakes, criticism, or nagging.",
          "I may underperform when being observed or in competitive situations.",
          "Violent or cruel scenes (in films, news, etc.) linger with me.",
          "I feel overwhelmed when tasks and obligations pile up.",
          "Social tension or conflict lingers with me for a long time.",
          "Even after big achievements, pressure keeps me from enjoying it for long.",
          "Diet, lack of sleep, or overstimulation strongly affect my mood and body.",
          "I need time to adapt to new environments or unfamiliar places.",
          "As a child, I was often told I was â€œtoo sensitive.â€",
          "I am highly aware of othersâ€™ expectations and react sensitively.",
          "I often engage in deep reflection and introspection.",
          "My emotions fluctuate significantly.",
          "I function better in quiet and peaceful environments.",
          "I respond stronglyâ€”physically or mentallyâ€”to stimuli others find trivial."
        ]
      }
    };

    // =======================
    // ìƒíƒœ ë° ì €ì¥ í‚¤
    // =======================
    let currentLang = localStorage.getItem('hsp_lang') || 'ko';
    let currentQuestionIndex = 1;
    const STORE_BASE = 'hsp27_answers_v9_'; // ì–¸ì–´ë³„ ë¶„ë¦¬
    let answers = loadAnswers();

    // DOM
    const titleEl = document.getElementById('title');
    const subtitleEl = document.getElementById('subtitle');
    const subdescEl = document.getElementById('subdesc');
    const noteEl = document.getElementById('note');
    const resultTitle = document.getElementById('resultTitle');
    const progBar = document.getElementById('progBar');
    const progText = document.getElementById('progText');
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');
    const btnReset = document.getElementById('btnReset');
    const btnCopy = document.getElementById('btnCopy');
    const btnKakao = document.getElementById('btnKakao');
    const btnBlog = document.getElementById('btnBlog');
    const btnKo = document.getElementById('btnKo');
    const btnEn = document.getElementById('btnEn');

    const quizContainer = document.getElementById('quizContainer');
    const navActions = document.getElementById('navActions');
    const resultBox = document.getElementById('result');
    const interp = document.getElementById('interp');
    const scoreLine = document.getElementById('scoreLine');
    const tags = document.getElementById('tags');
    const refNote = document.getElementById('refNote');

    // =======================
    // ìœ í‹¸
    // =======================
    function t(){ return I18N[currentLang].ui; }
    function Q(){ return I18N[currentLang].questions; }
    function storeKey(){ return STORE_BASE + currentLang; }

    function saveAnswers(){
      try{ localStorage.setItem(storeKey(), JSON.stringify(answers)); }catch(e){}
    }
    function loadAnswers(){
      try{ const raw = localStorage.getItem(storeKey()); return raw?JSON.parse(raw):{}; }catch(e){ return {}; }
    }
    function getAnsweredCount(){ return Object.keys(answers).length; }

    // =======================
    // UI ë¹Œë“œ/ì—…ë°ì´íŠ¸
    // =======================
    function applyTexts(){
      document.documentElement.lang = currentLang === 'ko' ? 'ko' : 'en';
      titleEl.textContent = t().title;
      subtitleEl.textContent = t().subtitle;
      subdescEl.textContent = t().subdesc;
      noteEl.innerHTML = t().note;
      resultTitle.textContent = t().result;

      // ë²„íŠ¼ ë¼ë²¨
      btnPrev.textContent = t().prev;
      btnNext.textContent = t().next;
      btnReset.textContent = t().reset;
      btnCopy.textContent = t().copy;
      btnKakao.textContent = t().shareKakao;
      btnBlog.textContent = t().blogBtn;

      // ì–¸ì–´ ë²„íŠ¼ ìƒíƒœ
      btnKo.classList.toggle('active', currentLang==='ko');
      btnEn.classList.toggle('active', currentLang==='en');

      // ì§„í–‰ë„
      updateProgress();
    }

    function buildForm(){
      quizContainer.innerHTML = '';
      const total = Q().length;
      Q().forEach((q, i)=>{
        const idx = i+1;
        const wrap = document.createElement('div');
        wrap.className = 'item';
        wrap.id = `item-${idx}`;

        const head = document.createElement('div'); head.className = 'qhead';
        const num = document.createElement('div'); num.className = 'qnum'; num.textContent = t().qnum(idx, total);
        const qtxt = document.createElement('span'); qtxt.className = 'qtxt'; qtxt.textContent = q;
        head.appendChild(num); head.appendChild(qtxt);

        const opts = document.createElement('div'); opts.className = 'opts';
        const btnYes = document.createElement('button');
        btnYes.className = 'ans-btn'; btnYes.textContent = t().yes; btnYes.dataset.value='1';
        btnYes.addEventListener('click', ()=>handleAnswer(idx,1));

        const btnNo = document.createElement('button');
        btnNo.className = 'ans-btn'; btnNo.textContent = t().no; btnNo.dataset.value='0';
        btnNo.addEventListener('click', ()=>handleAnswer(idx,0));

        opts.appendChild(btnYes); opts.appendChild(btnNo);
        wrap.appendChild(head); wrap.appendChild(opts);
        quizContainer.appendChild(wrap);

        // ë³µì›
        const key = `q${idx}`;
        if (answers[key] !== undefined){
          const v = answers[key];
          if (v===1) btnYes.classList.add('selected-1');
          if (v===0) btnNo.classList.add('selected-0');
        }
      });
      goToQuestion(1);
    }

    function updateNavigation(){
      btnPrev.style.visibility = (currentQuestionIndex>1) ? 'visible' : 'hidden';
      if (currentQuestionIndex < Q().length){
        btnNext.textContent = t().next;
        btnNext.classList.remove('primary'); btnNext.classList.add('ghost');
      }else{
        btnNext.textContent = t().seeResult;
        btnNext.classList.remove('ghost'); btnNext.classList.add('primary');
      }
    }
    function updateProgress(){
      const a = getAnsweredCount(); const total = Q().length;
      const pct = Math.round((a/total)*100);
      progBar.style.width = pct + '%';
      progText.textContent = t().progress(a,total);
    }

    // =======================
    // ë™ì‘
    // =======================
    function goToQuestion(index){
      if(index<1 || index>Q().length) return;
      resultBox.style.display='none'; quizContainer.style.display='block'; navActions.style.display='flex';
      const prev = document.getElementById(`item-${currentQuestionIndex}`); if(prev) prev.classList.remove('active');
      currentQuestionIndex = index;
      const cur = document.getElementById(`item-${currentQuestionIndex}`); if(cur) cur.classList.add('active');
      updateNavigation();
    }

    function handleAnswer(n,v){
      answers[`q${n}`]=v; saveAnswers(); updateProgress();
      const cur = document.getElementById(`item-${n}`);
      if(cur){
        cur.querySelectorAll('.ans-btn').forEach(btn=>{
          btn.classList.remove('selected-1','selected-0');
          if(Number(btn.dataset.value)===v) btn.classList.add(`selected-${v}`);
        });
      }
      if(n<Q().length) goToQuestion(n+1);
    }

    function calculate(){
      const total = Q().length;
      if(getAnsweredCount()!==total){
        alert(currentLang==='ko' ? "ì•„ì§ ë‹µë³€í•˜ì§€ ì•Šì€ ë¬¸í•­ì´ ìˆìŠµë‹ˆë‹¤!" : "Some items are unanswered!");
        for(let i=1;i<=total;i++){
          if(answers[`q${i}`]===undefined){ goToQuestion(i); const tEl=document.getElementById(`item-${i}`); if(tEl) tEl.classList.add('req'); return; }
        }
        return;
      }
      let score=0; for(let i=1;i<=total;i++) score += answers[`q${i}`];

      let bandClass='ok', bandTxt='', interpTxt='';
      if(score>=14){ bandClass='err'; bandTxt=t().bandHigh; interpTxt=t().interpHigh; }
      else if(score>=10){ bandClass='warn'; bandTxt=t().bandMid; interpTxt=t().interpMid; }
      else { bandClass='ok'; bandTxt=t().bandLow; interpTxt=t().interpLow; }

      interp.innerHTML = `<span class="badge ${bandClass}">${bandTxt}</span>`;
      scoreLine.textContent = t().scoreLine(score,total);

      // íƒœê·¸(Bilingual: ê¸°ë³¸ì€ í•´ë‹¹ ì–¸ì–´ íƒœê·¸ + HSP/ì˜ˆë¯¼í‚¤ì›Œë“œ ê³ ì • ì„¸íŠ¸)
      const tagSet = (currentLang==='ko')
        ? ['#HSP','#ì˜ˆë¯¼í•œì‚¬ëŒ','#ì˜ˆë¯¼í•˜ë‹¤',...t().tags]
        : ['#HSP','#ì˜ˆë¯¼í•œì‚¬ëŒ','#ì˜ˆë¯¼í•˜ë‹¤',...t().tags];
      tags.innerHTML = tagSet.map(x=>`<span class="pill">${x}</span>`).join("");

      // í•´ì„ ë¬¸ë‹¨(ê¸°ì¡´ ìˆìœ¼ë©´ ì œê±° í›„ ì¶”ê°€)
      const ex=document.getElementById('finalInterp'); if(ex) ex.remove();
      scoreLine.insertAdjacentHTML('afterend', `<p id="finalInterp" style="font-size:1.1em;line-height:1.6;margin:8px 0 0">${interpTxt}</p>`);

      refNote.innerHTML = t().references;

      resultBox.style.display='flex'; quizContainer.style.display='none'; navActions.style.display='none';
      document.querySelector('.container').scrollIntoView({behavior:"smooth",block:"start"});

      try{ trackHspScore(score); }catch(e){}
    }

    function resetAnswers(){
      if(!confirm(currentLang==='ko' ? "ì‘ë‹µì„ ëª¨ë‘ ì§€ìš°ì‹œê² ì–´ìš”?" : "Clear all answers?")) return;
      answers = {}; saveAnswers(); updateProgress();
      resultBox.style.display='none'; quizContainer.style.display='block'; navActions.style.display='flex';
      const ex=document.getElementById('finalInterp'); if(ex) ex.remove();
      quizContainer.querySelectorAll('.item').forEach(it=>{
        it.classList.remove('active','req');
        it.querySelectorAll('.ans-btn').forEach(b=>b.classList.remove('selected-1','selected-0'));
      });
      goToQuestion(1); window.scrollTo({top:0,behavior:"smooth"});
    }

    function setLang(lang){
      if(lang===currentLang) return;
      currentLang = lang;
      localStorage.setItem('hsp_lang', currentLang);
      // ì–¸ì–´ ë°”ê¾¸ë©´ ê·¸ ì–¸ì–´ ì €ì¥ì†Œì—ì„œ ì‘ë‹µ ë³µì›
window.scrollTo({top:0, behavior:'smooth'});
      answers = loadAnswers();
      applyTexts();
      buildForm();
      resultBox.style.display='none'; // ì „í™˜ ì‹œ ê²°ê³¼ ìˆ¨ê¹€
    }

    // =======================
    // ì´ë²¤íŠ¸
    // =======================
    document.getElementById('btnPrev').addEventListener('click', ()=>{ if(currentQuestionIndex>1) goToQuestion(currentQuestionIndex-1); });
    document.getElementById('btnNext').addEventListener('click', ()=>{ if(currentQuestionIndex<Q().length) goToQuestion(currentQuestionIndex+1); else calculate(); });
    document.getElementById('btnReset').addEventListener('click', resetAnswers);
    document.getElementById('btnBlog').addEventListener('click', ()=>{ window.open('https://blog.naver.com/forhsp-', '_blank'); });
btnKo.addEventListener('click', () => setLang('ko'));
btnEn.addEventListener('click', () => setLang('en'));

    // ê³µìœ (ë§í¬ ë³µì‚¬/ì¹´ì¹´ì˜¤)
    document.getElementById('btnCopy').addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(location.href); alert(currentLang==='ko'?'í˜ì´ì§€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.':'Link copied!'); }
      catch(e){ alert(currentLang==='ko'?'ë³µì‚¬ ì‹¤íŒ¨. ì£¼ì†Œì°½ ë§í¬ë¥¼ ì§ì ‘ ë³µì‚¬í•´ì£¼ì„¸ìš”.':'Copy failed. Please copy from the address bar.'); }
    });
    document.getElementById('btnKakao').addEventListener('click', ()=>{
      Kakao.Share.sendDefault({
        objectType:'feed',
        content:{
          title: currentLang==='ko' ? 'ë‚˜ëŠ” ì–¼ë§ˆë‚˜ ì˜ˆë¯¼í•œ ì‚¬ëŒì¼ê¹Œ?' : 'How sensitive am I?',
          description: currentLang==='ko' ? 'HSP(Highly Sensitive Person) ìê°€ì§„ë‹¨ - 27ë¬¸í•­' : 'HSP (Highly Sensitive Person) Self-Test â€” 27 Items',
          imageUrl:'https://hsp-test.github.io/hsp-test/og-hsp.png',
          link:{ mobileWebUrl: location.href, webUrl: location.href }
        },
        buttons:[{ title: currentLang==='ko'?'ë°”ë¡œ í…ŒìŠ¤íŠ¸':'Start Test', link:{ mobileWebUrl: location.href, webUrl: location.href } }]
      });
    });

    // ì´ˆê¸° êµ¬ë™
    applyTexts();
    buildForm();
  </script>
</body>
</html>
